(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{163:function(e,t,a){},179:function(e,t,a){},192:function(e,t,a){e.exports=a(391)},197:function(e,t,a){},198:function(e,t,a){},199:function(e,t,a){},319:function(e,t,a){},320:function(e,t,a){},384:function(e,t,a){},385:function(e,t,a){},386:function(e,t,a){},387:function(e,t,a){},389:function(e,t,a){},390:function(e,t,a){},391:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(5),o=a.n(r),i=(a(197),a(10)),c=a(11),l=a(13),u=a(12),m=a(14),p=a(27),d=a(23),h=(a(198),a(405)),f=a(402),g=a(397),E=a(399),v=a(7),b=a(35),y=(a(199),a(112),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onClose=function(){a.setState({visible:!1,isLogin:!0})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||console.log("Received values of form: ",t)})},a.postData=function(){var e={email:a.state.email,password:a.state.password};fetch("http://localhost:3000/users/login",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){e.user.email===a.state.email?(console.log(e),a.setState({isLogin:!0,login_username:e.user.name}),h.a.success("Login Success"),window.location.reload()):(console.log(e),a.setState({isLogin:!1}),h.a.success("Login False"),window.location.reload())})},a.state={isLogin:!1,login_username:"",visible:!0,email:"",password:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"handleChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t={pathname:"/",query:{name:this.state.login_username,email:this.state.email,id:"",status:!0}};return this.state.isLogin?s.a.createElement(d.a,{to:t}):s.a.createElement("div",{id:"login"},s.a.createElement("div",{id:"login_form"},s.a.createElement(f.a,{title:"Login",width:350,onClose:this.onClose,visible:this.state.visible},s.a.createElement(g.a,{onSubmit:this.handleSubmit,className:"login-form"},s.a.createElement(g.a.Item,{label:"E-mail",hasFeedback:!0},e("eamil",{rules:[{required:!0,type:"email",message:"Please input email\u2018s format!"}]})(s.a.createElement(E.a,{prefix:s.a.createElement(v.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email",onChange:this.handleChangeEmail.bind(this)}))),s.a.createElement(g.a.Item,{label:"Password",hasFeedback:!0},e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(s.a.createElement(E.a,{prefix:s.a.createElement(v.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password",onChange:this.handleChangePassword.bind(this)}))),s.a.createElement(g.a.Item,null,s.a.createElement("a",{className:"login-form-forgot",href:"/register"},"Forgot password?"),s.a.createElement(b.a,{type:"primary",htmlType:"submit",className:"login-form-button",onClick:this.postData},"Login"))))))}}]),t}(s.a.Component)),j=g.a.create()(y),w=(a(319),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).logout=function(){fetch("http://localhost:3000/users/logout",{method:"Get"}).then(function(e){return e.json()}).then(function(e){console.log(e),a.setState({isLogout:!0}),h.a.success("Login success"),window.location.reload(),console.log("logout success",a.state.isLogout)})},a.state={isLogout:!1,login_username:"",email:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){if(this.state.isLogout){return s.a.createElement(d.a,{to:{pathname:"/"}})}return s.a.createElement(s.a.Fragment,null,s.a.createElement(b.a,{id:"logout_button",onClick:this.logout,type:"link",icon:"logout"},"Logout"))}}]),t}(s.a.Component)),O=a(392),S=a(403),k=(a(320),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onClose=function(){a.setState({visible:!1,cancel:!0})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||console.log("Received values of form: ",t)})},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.compareToFirstPassword=function(e,t,n){var s=a.props.form;t&&t!==s.getFieldValue("password")?n("Wrong!Please Confirm Again!"):n()},a.validateToNextPassword=function(e,t,n){var s=a.props.form;t&&a.state.confirmDirty&&s.validateFields(["confirm"],{force:!0}),n()},a.postData=function(){var e={email:a.state.email,name:a.state.name,password:a.state.password,avatar:a.state.avatar};fetch("http://localhost:3000/users/register",{method:"POST",body:JSON.stringify(e),headers:new Headers({"Content-Type":"application/json"})}).then(function(e){return e.text().then(function(e){console.log(e);var t=JSON.parse(e);console.log(t,t.status),"success"===t.status&&(a.setState({isRegister:!0}),console.log(a.state.isRegister,"in"))})})},a.Vertified=function(){a.setState({cancel:!0})},a.changeAvatar=function(e){a.setState({avatar:e,closeAvatar:"",showAvatar:"none"})},a.showAvatar=function(){a.setState({closeAvatar:"none",showAvatar:""})},a.state={email:"",name:"",password:"",avatar:1,showAvatar:"none",closeAvatar:"",confirmDirty:!1,visible:!0,cancel:!1,isRegister:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"handleChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"render",value:function(){for(var e=this,t=this.props.form.getFieldDecorator,a="../avatars/"+this.state.avatar+".png",n=[],r=function(t){n.push(s.a.createElement(O.a,{key:t,size:"64",src:"../avatars/"+t+".png",onClick:function(){return e.changeAvatar(t)}}))},o=1;o<=16;o++)r(o);return this.state.cancel?s.a.createElement(d.a,{to:"/"}):this.state.isRegister?s.a.createElement("div",{id:"successRegister"},s.a.createElement(f.a,{title:"Register",width:350,onClose:this.onClose,visible:this.state.visible},s.a.createElement(S.a,{status:"success",title:"Vertify Your E-mail Address",subTitle:"We just send you an E-mail with vertification link. Please check your mailbox and click the link to vertiy your E-mail Address",extra:[s.a.createElement(b.a,{type:"primary",onClick:this.Vertified},"Already Vertified")]}))):s.a.createElement("div",{id:"register"},s.a.createElement(f.a,{title:"Register",width:350,onClose:this.onClose,visible:this.state.visible},s.a.createElement("h4",null,s.a.createElement("span",{className:"mustChoose"},"*")," Please select your avatar"),s.a.createElement("div",{id:"avatarN",style:{display:this.state.showAvatar},className:"notChosen"},n),s.a.createElement("div",{id:"avatarY",style:{display:this.state.closeAvatar},className:"isChosen"},s.a.createElement(O.a,{id:"1",size:64,src:a,onClick:this.showAvatar})),s.a.createElement(g.a,{onSubmit:this.handleSubmit,className:"register-form"},s.a.createElement(g.a.Item,{label:"E-mail",hasFeedback:!0},t("eamil",{rules:[{required:!0,type:"email",message:"Please input email\u2018s format\uff01"}]})(s.a.createElement(E.a,{prefix:s.a.createElement(v.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"E-mail",onChange:this.handleChangeEmail.bind(this)}))),s.a.createElement(g.a.Item,{label:"User Name",hasFeedback:!0},t("Name",{rules:[{required:!0,min:"3",message:"The minimum letter is 3!"}]})(s.a.createElement(E.a,{prefix:s.a.createElement(v.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"User Name",onChange:this.handleChangeName.bind(this)}))),s.a.createElement(g.a.Item,{label:"Password",hasFeedback:!0},t("password",{rules:[{required:!0,min:"4",message:"Please input your Password!"},{validator:this.validateToNextPassword}]})(s.a.createElement(E.a.Password,{prefix:s.a.createElement(v.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password",onChange:this.handleChangePassword.bind(this)}))),s.a.createElement(g.a.Item,{label:"Confirm Password",hasFeedback:!0},t("confirm",{rules:[{required:!0,min:"4",message:"Please confirm your password!"},{validator:this.compareToFirstPassword}]})(s.a.createElement(E.a.Password,{onBlur:this.handleConfirmBlur,placeholder:"Password",prefix:s.a.createElement(v.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}})}))),s.a.createElement(g.a.Item,null,s.a.createElement(b.a,{size:"large",type:"primary",htmlType:"submit",className:"register-form-button",onClick:this.postData},"Register"),s.a.createElement("a",{href:"/login",id:"login_register"},"Login Now")))))}}]),t}(s.a.Component)),_=g.a.create()(k),N=(a(163),a(29)),C=a(398),R=a(395),I=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.postTopic=function(){var e,t;a.state.topicId?(e="http://localhost:3000/topics/reply",t={originalPicUrl:a.state.img_url_original,replyTo:a.state.topicId}):(e="http://localhost:3000/topics",t={originalPicUrl:a.state.img_url_original,smallPicUrl:a.state.img_url_small}),console.log(t),fetch(e,{method:"POST",body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json"})}).then(function(e){return e.json()}).then(function(e){console.log(e)}),a.setState({visible:!1,fileList:[]}),a.props.hideModal(),window.location.reload()},a.handleCancel=function(){a.props.hideModal(),a.setState({fileList:[],visible:!1})},a.state={visible:!1,img_url_original:"",img_url_small:"",fileList:[],topicId:a.props.topicId},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onImageUpload",value:function(e){var t=Object(N.a)(e.fileList);t=t.slice(-1),this.setState({fileList:Object(N.a)(t)}),e.file.status,"done"===e.file.status?(this.setState({img_url_original:e.file.response[0],img_url_small:e.file.response[1]}),h.a.success("File uploaded successfully!")):"error"==e.file.status&&h.a.error("The image contains text/unappropriate content and can't be uploaded.")}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"modal_window"},s.a.createElement(C.a,{title:this.props.boxHeader,visible:this.state.visible,okText:"Upload",onOk:function(){e.postTopic()},onCancel:this.handleCancel},s.a.createElement("div",{className:"image_upload"},s.a.createElement(R.a,{name:"image",action:"http://localhost:3000/images/upload",onChange:function(t){e.onImageUpload(t)},fileList:this.state.fileList},s.a.createElement(b.a,null,s.a.createElement(v.a,{type:"upload"})," Click to upload image")))))}},{key:"componentDidUpdate",value:function(e){e.showModal!=this.props.showModal&&this.setState({visible:this.props.showModal}),e.topicId!=this.props.topicId&&this.setState({topicId:this.props.topicId})}}]),t}(s.a.Component),L=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).upload_props=void 0,a.showModal=function(){a.setState({visible:!0})},a.handleCancel=function(){a.setState({visible:!1})},a.state={visible:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{id:"add_topic"},s.a.createElement("div",{id:"add_button",onClick:this.showModal},s.a.createElement(v.a,{type:"plus"})),s.a.createElement(I,{showModal:this.state.visible,hideModal:this.handleCancel,boxHeader:"Upload new picture to start new topic"}))}}]),t}(s.a.PureComponent),P=a(401),F=a(400),T=a(407),M=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).menu=s.a.createElement(P.a,null,s.a.createElement(P.a.Item,{key:"1"},s.a.createElement(p.b,{to:"/user"},s.a.createElement(b.a,{type:"link",icon:"picture"},"My posts"))),s.a.createElement(P.a.Item,{key:"2"},s.a.createElement(p.b,{to:"/user/notifications"},s.a.createElement(b.a,{type:"link",icon:"notification"},"Notifications"))),s.a.createElement(P.a.Item,{key:"3"},s.a.createElement(p.b,{to:"/user/setting"},s.a.createElement(b.a,{type:"link",icon:"setting"},"Setting"))),s.a.createElement(P.a.Item,{key:"4"},s.a.createElement(w,null))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){if(this.props.isLogin){var e="../avatars/"+this.props.avatar+".png";return s.a.createElement("div",{id:"header"},s.a.createElement(p.b,{id:"logo",to:"/"},"picChat"),s.a.createElement(L,null),s.a.createElement("div",{id:"user_menu"},s.a.createElement(F.a,{overlay:this.menu},s.a.createElement("div",{id:"user_info"},s.a.createElement(T.a,{count:0,offset:[0,2]},s.a.createElement(O.a,{size:40,src:e})),s.a.createElement("span",{className:"name"},this.props.userName)))))}return s.a.createElement("div",{id:"header"},s.a.createElement(p.b,{id:"logo",to:"/"},"picChat"),s.a.createElement(L,null),s.a.createElement("div",{id:"login"},s.a.createElement(p.a,null,s.a.createElement(p.b,{to:"/login",className:"login"},"Login"),s.a.createElement(p.b,{to:"/register",className:"register"},"Register"),s.a.createElement("div",null,s.a.createElement(d.b,{path:"/login",component:j}),s.a.createElement(d.b,{path:"/register",component:_})))))}}]),t}(s.a.Component),U=a(394),x=a(393),A=(a(384),v.a.createFromIconfontCN({scriptUrl:"/iconfont.js"})),z=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).updateReacts=a.props.updateReacts(),a.deleteReacts=a.props.deleteReacts(),a.reactToTopic=function(e,t){var n=a.state.yourReact;if(n)if(n.emoji===t){var s={react_id:n._id};fetch("http://localhost:3000/reacts",{method:"DELETE",headers:{"Content-type":"application/json"},body:JSON.stringify(s)}).then(function(e){return e.json()}).then(function(e){a.setState({yourReact:""}),a.deleteReacts(e.deleteId),h.a.success("React Deleted Successfully")})}else{var r={react_id:n._id,emoji:t};fetch("http://localhost:3000/reacts",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(r)}).then(function(e){return e.json()}).then(function(e){"failure"===e.status?console.log("not login yet"):(a.setState({yourReact:{_id:e.newReact._id,emoji:t}}),a.updateReacts(e.newReact),h.a.success("React Updated Successfully"))})}else{var o={topic_id:e,emoji:t};fetch("http://localhost:3000/reacts",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(o)}).then(function(e){return e.json()}).then(function(e){"failure"===e.status?h.a.error("You need to login to react"):(a.setState({yourReact:{_id:e.newReact._id,emoji:t}}),a.updateReacts(e.newReact),h.a.success("React Successfully"))})}},a.state={yourReact:a.props.yourReact,types:["a","baiyan","aixin","daxiao","fadai","ganga","hanyan","liulei","xiaochulei","shengqi","feiwen","huaixiao","santiaoxian","yiwen","siliao"]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.yourReact!==e.yourReact&&this.setState({yourReact:this.props.yourReact})}},{key:"render",value:function(){var e=this,t=s.a.createElement("div",{className:"emoji_box"},this.state.types.map(function(t){return s.a.createElement("span",{key:t,className:e.state.yourReact.emoji===t?"isActive":"",onClick:function(){return e.reactToTopic(e.props.topicId,t)}},s.a.createElement(A,{type:"icon-"+t}))}));return s.a.createElement(x.a,{title:"React",content:t,placement:"bottom"},s.a.createElement(v.a,{className:"add_react",type:"smile",theme:"twoTone",twoToneColor:"#1890ff",style:{fontSize:"24px"}}))}}]),t}(s.a.Component),D=(a(385),v.a.createFromIconfontCN({scriptUrl:"/iconfont.js"})),H=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={reacts:a.props.reacts,showUploadModal:!1},a.updateReacts=function(e){for(var t=!1,n=a.state.reacts,s=0;s<a.state.reacts.length;s++){a.state.reacts[s]._id===e._id&&(t=!0,n[s].emoji=e.emoji)}t?a.setState({reacts:n}):a.setState(function(t){return{reacts:[].concat(Object(N.a)(t.reacts),[e])}})},a.deleteReacts=function(e){for(var t=a.state.reacts,n=0;n<t.length;n++)if(t[n]._id===e)return t.splice(n,1),void a.setState({reacts:t})},a.showModal=function(){a.setState({showUploadModal:!0})},a.handleCancelUpload=function(){a.setState({showUploadModal:!1})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"user_info"},s.a.createElement(O.a,{src:"../avatars/"+this.props.avatar+".png"}),s.a.createElement("strong",null,this.props.name),s.a.createElement("span",{className:"date"},"posted on ",this.props.createAt.substr(0,10))),s.a.createElement("div",{className:"img_box"},s.a.createElement(p.b,{to:"/topics_detail/".concat(this.props.topicId)},s.a.createElement("img",{src:this.props.smallPicUrl,alt:this.props.smallPicUrl}))),s.a.createElement("div",{className:"interact_box"},this.state.reacts.length>0&&s.a.createElement("div",{className:"current_reacts"},this.state.reacts.map(function(e){return s.a.createElement("span",{key:e._id},s.a.createElement(D,{type:"icon-"+e.emoji}))})),s.a.createElement("div",{className:"buttons_box"},s.a.createElement(z,{topicId:this.props.topicId,yourReact:this.props.yourReact,updateReacts:function(){return e.updateReacts},deleteReacts:function(){return e.deleteReacts}}),s.a.createElement(v.a,{className:"add_reply",type:"picture",theme:"twoTone",twoToneColor:"#1890ff",style:{fontSize:"24px"},onClick:this.showModal}))),this.props.replies.length>0&&s.a.createElement("div",{className:"replies"},s.a.createElement(p.b,{to:"/topics_detail/".concat(this.props.topicId)},this.props.replies.length," replies")),s.a.createElement(I,{showModal:this.state.showUploadModal,hideModal:this.handleCancelUpload,boxHeader:"Upload new picture to reply on topic",topicId:this.props.topicId}))}}]),t}(s.a.Component),B=a(408),q=(a(386),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).showFromNewtoOld=function(e,t,n){n&&a.setState({topics:[],page:0}),fetch("http://localhost:3000/topics?sort=1&size="+e+"&page="+t).then(function(e){return e.json()}).then(function(e){a.setState({sort:1,topics:[].concat(Object(N.a)(a.state.topics),Object(N.a)(e)),tags:"From New to Old",page:a.state.page+1,canLoad:!(e.length<a.state.pageSize)})})},a.showFromOldtoNew=function(e,t,n){n&&a.setState({topics:[],page:0}),fetch("http://localhost:3000/topics?sort=2&size="+e+"&page="+t).then(function(e){return e.json()}).then(function(e){a.setState({sort:2,topics:[].concat(Object(N.a)(a.state.topics),Object(N.a)(e)),tags:"From Old to New",page:a.state.page+1,canLoad:!(e.length<a.state.pageSize)})})},a.showFromLowtoHigh=function(e,t,n){n&&a.setState({topics:[],page:0}),fetch("http://localhost:3000/topics?sort=3&size="+e+"&page="+t).then(function(e){return e.json()}).then(function(e){a.setState({sort:3,topics:[].concat(Object(N.a)(a.state.topics),Object(N.a)(e)),tags:"From Low to High",page:a.state.page+1,canLoad:!(e.length<a.state.pageSize)})})},a.showFromHightoLow=function(e,t,n){n&&a.setState({topics:[],page:0}),fetch("http://localhost:3000/topics?sort=4&size="+e+"&page="+t).then(function(e){return e.json()}).then(function(e){a.setState({sort:4,topics:[].concat(Object(N.a)(a.state.topics),Object(N.a)(e)),tags:"From High to Low",page:a.state.page+1,canLoad:!(e.length<a.state.pageSize)})})},a.loadMore=function(e){switch(e){case 1:a.showFromNewtoOld(a.state.pageSize,a.state.page,!1);break;case 2:a.showFromOldtoNew(a.state.pageSize,a.state.page,!1);break;case 3:a.showFromLowtoHigh(a.state.pageSize,a.state.page,!1);break;case 4:a.showFromHightoLow(a.state.pageSize,a.state.page,!1)}},a.state={sort:1,topics:[],tags:"From New to Old",pageSize:4,page:0,canLoad:!0},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.showFromNewtoOld(this.state.pageSize,this.state.page,!0)}},{key:"render",value:function(){var e=this,t=s.a.createElement(P.a,null,s.a.createElement(P.a.Item,{key:"1",onClick:function(){return e.showFromNewtoOld(e.state.pageSize,0,!0)}},"New to Old"),s.a.createElement(P.a.Item,{key:"2",onClick:function(){return e.showFromOldtoNew(e.state.pageSize,0,!0)}},"Old to New")),a=s.a.createElement(P.a,null,s.a.createElement(P.a.Item,{key:"1",onClick:function(){return e.showFromLowtoHigh(e.state.pageSize,0,!0)}},"Low to High"),s.a.createElement(P.a.Item,{key:"2",onClick:function(){return e.showFromHightoLow(e.state.pageSize,0,!0)}},"High to low")),n=this.state.topics.map(function(e){return s.a.createElement(H,{key:e._id,smallPicUrl:e.smallPicUrl,name:e.createBy.name,avatar:e.createBy.avatar,createAt:e.createAt,topicId:e._id,replies:e.replies,reacts:e.reacts,yourReact:e.yourReact?e.yourReact:""})});return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"topic_list_tab"},s.a.createElement("div",{className:"sort_buttons"},s.a.createElement(F.a,{overlay:t},s.a.createElement(b.a,null,s.a.createElement(v.a,{type:"calendar"}),"Recency")),s.a.createElement(F.a,{overlay:a},s.a.createElement(b.a,{className:"popularity"},s.a.createElement(v.a,{type:"fire"}),"Popularity"))),s.a.createElement("div",{className:"sort_feedback"},s.a.createElement("span",{className:"sort"},"Sort By:"),s.a.createElement(B.a,{color:"gold"},this.state.tags))),s.a.createElement("div",{id:"topic_list"},n),this.state.canLoad&&s.a.createElement(b.a,{id:"load_more",onClick:function(){return e.loadMore(e.state.sort)}},"Loading more..."),!this.state.canLoad&&s.a.createElement("div",{className:"nomore"},s.a.createElement(v.a,{style:{fontSize:"34px"},type:"build"}),s.a.createElement("p",null,"More pictures are coming")))}}]),t}(s.a.Component)),J=a(70),V=(a(179),v.a.createFromIconfontCN({scriptUrl:"/iconfont.js"})),Y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).updateReacts=function(e){for(var t=!1,n=a.state.reacts,s=0;s<a.state.reacts.length;s++){a.state.reacts[s]._id===e._id&&(t=!0,n[s].emoji=e.emoji)}t?a.setState({reacts:n}):a.setState(function(t){return{reacts:[].concat(Object(N.a)(t.reacts),[e])}})},a.deleteReacts=function(e){for(var t=a.state.reacts,n=0;n<t.length;n++)if(t[n]._id===e)return t.splice(n,1),void a.setState({reacts:t})},a.showModal=function(){a.setState({visible:!0})},a.handleCancel=function(){a.setState({visible:!1})},a.state={reacts:a.props.reacts,visible:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.replies.map(function(t){return s.a.createElement("div",{className:"level3",key:t._id},s.a.createElement("div",{className:"user_info"},s.a.createElement(O.a,{src:"../avatars/"+t.createBy.avatar+".png"}),s.a.createElement("strong",null,t.createBy.name),s.a.createElement("span",{className:"date"},"posted on ",t.createAt.substr(0,10))),s.a.createElement("div",{className:"img_box"},s.a.createElement("img",{src:t.originalPicUrl})),s.a.createElement("div",{className:"button_box"},s.a.createElement(z,{topicId:e.props.topicId,yourReact:e.props.yourReact,updateReacts:function(){return e.updateReacts},deleteReacts:function(){return e.deleteReacts}}),s.a.createElement(v.a,{className:"add_reply",type:"picture",theme:"twoTone",twoToneColor:"#1890ff",style:{fontSize:"24px"},onClick:e.showModal})))});return s.a.createElement("div",{className:"single_reply"},s.a.createElement("div",{className:"level2"},s.a.createElement("div",{className:"user_info"},s.a.createElement(O.a,{src:"../avatars/"+this.props.avatar+".png"}),s.a.createElement("strong",null,this.props.name),s.a.createElement("span",{className:"date"},"posted on ",this.props.createAt.substr(0,10))),s.a.createElement("div",{className:"img_box"},s.a.createElement("img",{src:this.props.originalPicUrl}),this.state.reacts.length>0&&s.a.createElement("div",{className:"reacts_box"},this.state.reacts.map(function(e){return s.a.createElement("span",{key:e._id},s.a.createElement(V,{type:"icon-"+e.emoji}))}))),s.a.createElement("div",{className:"button_box"},s.a.createElement(z,{topicId:this.props.topicId,yourReact:this.props.yourReact,updateReacts:function(){return e.updateReacts},deleteReacts:function(){return e.deleteReacts}}),s.a.createElement(v.a,{className:"add_reply",type:"picture",theme:"twoTone",twoToneColor:"#1890ff",style:{fontSize:"24px"},onClick:this.showModal}),s.a.createElement(I,{showModal:this.state.visible,hideModal:this.handleCancel,boxHeader:"Upload new picture to reply",topicId:this.props.topicId}))),t)}}]),t}(s.a.Component),G=v.a.createFromIconfontCN({scriptUrl:"/iconfont.js"}),W=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).updateReacts=function(e){for(var t=!1,n=a.state.reacts,s=0;s<a.state.reacts.length;s++){a.state.reacts[s]._id===e._id&&(t=!0,n[s].emoji=e.emoji)}t?a.setState({reacts:n}):a.setState(function(t){return{reacts:[].concat(Object(N.a)(t.reacts),[e])}})},a.deleteReacts=function(e){for(var t=a.state.reacts,n=0;n<t.length;n++)if(t[n]._id===e)return t.splice(n,1),void a.setState({reacts:t})},a.state={id:"",name:"",avatar:1,originalPicUrl:"",createAt:"",replies:[],reacts:[],yourReact:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:3000/topics/single?id="+this.props.match.params.id).then(function(e){return e.json()}).then(function(t){var a=t;e.setState({id:a._id,name:a.createBy.name,avatar:a.createBy.avatar,originalPicUrl:a.originalPicUrl,createAt:a.createAt,replies:a.replies,reacts:a.reacts,yourReact:a.yourReact?a.yourReact:""})})}},{key:"render",value:function(){var e=this,t=this.state.replies.map(function(e){return s.a.createElement(Y,{key:e._id,originalPicUrl:e.originalPicUrl,name:e.createBy.name,avatar:e.createBy.avatar,replies:e.replies,createAt:e.createAt,topicId:e._id,reacts:e.reacts,yourReact:e.yourReact?e.yourReact:""})});return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{id:"topic_detail"},s.a.createElement("div",{id:"author_info"},s.a.createElement(O.a,{src:"../avatars/"+this.state.avatar+".png"}),s.a.createElement("strong",null,this.state.name),s.a.createElement("span",{className:"date"},"posted on ",this.state.createAt.substr(0,10))),s.a.createElement("div",{id:"main_pic"},s.a.createElement("img",{src:this.state.originalPicUrl}),this.state.reacts.length>0&&s.a.createElement("div",{className:"reacts_box"},this.state.reacts.map(function(e){return s.a.createElement("span",{key:e._id},s.a.createElement(G,{type:"icon-"+e.emoji}))}))),s.a.createElement("div",{className:"buttons_box"},s.a.createElement(z,{topicId:this.state.id,yourReact:this.state.yourReact,updateReacts:function(){return e.updateReacts},deleteReacts:function(){return e.deleteReacts}}),s.a.createElement(v.a,{className:"add_reply",type:"picture",theme:"twoTone",twoToneColor:"#1890ff",style:{fontSize:"24px"}}))),s.a.createElement("div",{id:"replies_list"},s.a.createElement("h2",null,"Replies"),0==t.length&&s.a.createElement(J.a,{image:J.a.PRESENTED_IMAGE_SIMPLE,description:"There is no reply yet"}),t))}}]),t}(s.a.Component),K=a(396),Q=(a(387),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={filter:"reacts",userList:[]},a.showMostReacts=function(){a.setState({filter:"reacts"}),fetch("http://localhost:3000/users/leaderboard?type=mostReacts").then(function(e){return e.json()}).then(function(e){a.setState({userList:e})})},a.showMostTopics=function(){a.setState({filter:"topics"}),fetch("http://localhost:3000/users/leaderboard?type=mostTopics").then(function(e){return e.json()}).then(function(e){a.setState({userList:e})})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.showMostReacts()}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("h3",null,s.a.createElement(v.a,{type:"unordered-list"}),"Leaderboard"),s.a.createElement("div",{className:"filter"},s.a.createElement("button",{className:"reacts"===this.state.filter?"isActive":"",onClick:this.showMostReacts},s.a.createElement(v.a,{type:"smile"})," Reacts"),s.a.createElement("button",{className:"topics"===this.state.filter?"isActive":"",onClick:this.showMostTopics},s.a.createElement(v.a,{type:"picture"})," Topics")),s.a.createElement(K.a,{id:"leaderboard_list",dataSource:this.state.userList,renderItem:function(t){return s.a.createElement(K.a.Item,null,s.a.createElement(K.a.Item.Meta,{avatar:s.a.createElement(O.a,{src:"../avatars/"+t.avatar+".png"}),title:t.name,key:t._id,description:"reacts"===e.state.filter?"React Times: "+t.reactTimes:"Post Topics: "+t.topicTimes}))}}))}}]),t}(s.a.Component)),X=U.a.Sider,Z=U.a.Content,$=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement(U.a,null,s.a.createElement(Z,null,s.a.createElement(d.d,null,s.a.createElement(d.b,{path:"/topics_detail/:id",component:W}),s.a.createElement(d.b,{path:"/",exact:!0,component:q}))),s.a.createElement(X,{className:"leaderboard",breakpoint:"lg",collapsedWidth:"0",reverseArrow:!0},s.a.createElement(Q,null)))}}]),t}(s.a.Component),ee=(a(98),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={topics:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:3000/topics/fromUser").then(function(e){return e.json()}).then(function(t){e.setState({topics:t})})}},{key:"render",value:function(){var e=this.state.topics.map(function(e){return s.a.createElement(H,{key:e._id,smallPicUrl:e.smallPicUrl,name:e.createBy.name,avatar:e.createBy.avatar,createAt:e.createAt,topicId:e._id,replies:e.replies,reacts:e.reacts,yourReact:"empty"})});return s.a.createElement(s.a.Fragment,null,s.a.createElement("h2",null,"My Posts"),s.a.createElement("div",{id:"user_topic_list"},e))}}]),t}(s.a.Component)),te=v.a.createFromIconfontCN({scriptUrl:"/iconfont.js"}),ae=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={notifications:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:3000/notifications/toUser").then(function(e){return e.json()}).then(function(t){e.setState({notifications:t})})}},{key:"render",value:function(){return this.state.notifications.length>0?s.a.createElement(s.a.Fragment,null,s.a.createElement("h2",null,"Notifications"),s.a.createElement("div",{id:"notifications"},s.a.createElement(K.a,{itemLayout:"horizontal",dataSource:this.state.notifications,renderItem:function(e){return s.a.createElement(K.a.Item,null,s.a.createElement(K.a.Item.Meta,{avatar:s.a.createElement(O.a,{src:"../avatars/"+e.fromUser.avatar+".png"}),title:"You have a new "+e.type,description:s.a.createElement(s.a.Fragment,null,s.a.createElement("strong",{className:"from"},e.fromUser.name),s.a.createElement("p",{className:"text"},"has reacted to your picture with "),s.a.createElement(te,{type:"icon-"+e.content}),s.a.createElement(p.b,{to:"/topics_detail/".concat(e.atTopic)},"Link"))}))}}))):s.a.createElement(s.a.Fragment,null,s.a.createElement("h2",null,"Notifications"),s.a.createElement(J.a,{image:J.a.PRESENTED_IMAGE_SIMPLE,description:"You have no notifications yet"}))}}]),t}(s.a.Component),ne=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement(P.a,{id:"user_panel_menu",defaultSelectedKeys:["/user"],theme:"light",mode:"inline",selectedKeys:[this.props.location.pathname]},s.a.createElement(P.a.Item,{key:"/user"},s.a.createElement(p.b,{to:"/user"},s.a.createElement(v.a,{type:"picture"}),s.a.createElement("span",null,"My posts"))),s.a.createElement(P.a.Item,{key:"/user/notifications"},s.a.createElement(p.b,{to:"/user/notifications"},s.a.createElement(v.a,{type:"notification"}),s.a.createElement("span",null,"Notifications"))),s.a.createElement(P.a.Item,{key:"3"},s.a.createElement(v.a,{type:"setting"}),s.a.createElement("span",null,"Settings")))}}]),t}(s.a.Component),se=U.a.Sider,re=U.a.Content,oe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={topics:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:3000/topics/fromUser").then(function(e){return e.json()}).then(function(t){e.setState({topics:t})})}},{key:"render",value:function(){return s.a.createElement(U.a,null,s.a.createElement(se,{width:240,style:{background:"#fff"}},s.a.createElement(d.b,{path:"/user",component:ne})),s.a.createElement(re,null,s.a.createElement("div",{id:"user_panel"},s.a.createElement(d.b,{path:"/user",exact:!0,component:ee}),s.a.createElement(d.b,{path:"/user/notifications",component:ae}))))}}]),t}(s.a.Component),ie=(a(389),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("footer",null,s.a.createElement("div",{className:"footer-logo"},s.a.createElement("img",{src:"/images/logo-footer.png"})),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("a",null,"How to use")),s.a.createElement("li",null,s.a.createElement("a",null,"About us"))))}}]),t}(s.a.Component)),ce=a(406),le=a(404),ue=(a(390),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={user:{name:"",email:"",id:"",avatar:""},isLogin:!1},a.updataFetch=function(){fetch("http://localhost:3000/users").then(function(e){return e.json()}).then(function(e){"success"===e.status?a.setState({user:{name:e.user.name,email:e.user.email,id:e.user.id,avatar:e.user.avatar},isLogin:!0}):a.setState({isLogin:!1})})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.updataFetch()}},{key:"render",value:function(){return s.a.createElement(p.a,null,s.a.createElement("div",{className:"App",id:"App"},s.a.createElement(ce.a,null,s.a.createElement(M,{userName:this.state.user.name,isLogin:this.state.isLogin,avatar:this.state.user.avatar})),s.a.createElement(d.d,null,s.a.createElement(d.b,{path:"/user",component:oe}),s.a.createElement(d.b,{path:"/",component:$})),s.a.createElement(le.a,null,s.a.createElement("div",{className:"ant-back-top-inner"},s.a.createElement(v.a,{type:"arrow-up"}))),s.a.createElement(ie,null)))}}]),t}(s.a.Component));o.a.render(s.a.createElement(ue,null),document.querySelector("#root"))},98:function(e,t,a){}},[[192,1,2]]]);
//# sourceMappingURL=main.0c5a3728.chunk.js.map